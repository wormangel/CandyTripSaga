<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Level Events</name>
    <events>
        <comment>These are used for fading</comment>
        <variable constant="0" name="transitionState" sid="9058277340274296" static="0" type="text">FadeIn</variable>
        <variable constant="0" name="luminosity" sid="6099894249677563" static="0" type="number">0</variable>
        <variable constant="0" name="transitioning" sid="6937824924987025" static="0" type="number">0</variable>
        <comment>When Kurt gets a candy, the candy should disappear</comment>
        <event-block sid="3463074638746736">
            <conditions>
                <condition id="0" name="On collision with another object" sid="9636036512899571" type="Candy">
                    <param id="0" name="Object">Kurt</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Destroy" sid="9959251510334578" type="Candy" />
            </actions>
        </event-block>
        <comment>Kurt can shoot</comment>
        <event-block sid="7156737183236879">
            <conditions>
                <condition id="3" name="On key released" sid="5538933329818861" type="Keyboard">
                    <param id="0" name="Key">32 (Space)</param>
                </condition>
                <condition id="-14" name="Compare variable" sid="9321017227432982" type="System">
                    <param id="0" name="Variable">Reload</param>
                    <param id="1" name="Comparison">5</param>
                    <param id="2" name="Value">0.25</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Spawn another object" sid="2816951133791187" type="Kurt">
                    <param id="0" name="Object">Projectile</param>
                    <param id="1" name="Layer">1</param>
                    <param id="2" name="Image point">1</param>
                </action>
                <action id="-9" name="Set value" sid="1652396011828836" type="System">
                    <param id="0" name="Variable">Reload</param>
                    <param id="1" name="Value">0</param>
                </action>
                <action id="-8" name="Set angle" sid="3083682876279493" type="Projectile">
                    <param id="0" name="Angle">90 * lastDirection</param>
                </action>
            </actions>
        </event-block>
        <comment>Display the sugar bar once the level loads</comment>
        <event-block sid="5633030378825208">
            <conditions>
                <condition id="-2" name="On start of layout" sid="6854953953550797" type="System" />
            </conditions>
            <actions>
                <action id="-3" name="Set position" sid="3367820583498985" type="InnerBar">
                    <param id="0" name="X">ExternalBar.X</param>
                    <param id="1" name="Y">ExternalBar.Y</param>
                </action>
                <action id="-10" name="Set value" sid="5196475388559625" type="InnerBar">
                    <param id="0" name="Instance variable">InitialWidth</param>
                    <param id="1" name="Value">Self.Width</param>
                </action>
                <action behavior="Turret" id="1" name="Add object to target" sid="1117280328107965" type="StaticEnemyShooter">
                    <param id="0" name="Target">Kurt</param>
                </action>
            </actions>
        </event-block>
        <comment>Keeps the sugar bar updated</comment>
        <event-block sid="3003431054682057">
            <conditions>
                <condition id="-1" name="Every tick" sid="9243923745695915" type="System" />
            </conditions>
            <actions>
                <action id="-5" name="Set width" sid="4729997778361857" type="InnerBar">
                    <param id="0" name="Width">(Self.InitialWidth + (Kurt.Life - Kurt.MaxLife) * (Self.InitialWidth/Kurt.MaxLife))</param>
                </action>
            </actions>
        </event-block>
        <comment>Kurt&apos;s life never stops dropping</comment>
        <event-block sid="3674372772691214">
            <conditions>
                <condition id="-1" name="Every tick" sid="2346815577418842" type="System" />
            </conditions>
            <actions>
                <action id="-10" name="Set value" sid="6993166764499677" type="Kurt">
                    <param id="0" name="Instance variable">Life</param>
                    <param id="1" name="Value">Self.Life-0.1</param>
                </action>
            </actions>
        </event-block>
        <comment>When life reaches zero, restore it (TODO KILL IT)</comment>
        <event-block sid="3114393595112236">
            <conditions>
                <condition id="-7" name="Compare instance variable" sid="1275985097970072" type="Kurt">
                    <param id="0" name="Instance variable">Life</param>
                    <param id="1" name="Comparison">3</param>
                    <param id="2" name="Value">0</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Set value" sid="7094376141314203" type="Kurt">
                    <param id="0" name="Instance variable">Life</param>
                    <param id="1" name="Value">50</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="3941027102799597">
            <conditions>
                <condition behavior="Turret" id="1" name="On shoot" sid="8643175289940287" type="StaticEnemyShooter" />
            </conditions>
            <actions>
                <action id="0" name="Spawn another object" sid="160847482478893" type="StaticEnemy">
                    <param id="0" name="Object">EnemyProjectile</param>
                    <param id="1" name="Layer">1</param>
                    <param id="2" name="Image point">1</param>
                </action>
                <action id="-22" name="Set angle toward position" sid="809554643185722" type="EnemyProjectile">
                    <param id="0" name="X">Kurt.X + Kurt.Width/2</param>
                    <param id="1" name="Y">Kurt.Y + Kurt.Height/2</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="8255972754156182">
            <conditions>
                <condition behavior="8Direction" id="0" name="Is moving" sid="4807222850280381" type="Kurt" />
            </conditions>
            <actions>
                <action id="4" name="Set animation" sid="2812956487710485" type="Kurt">
                    <param id="0" name="Animation">&quot;MovingR&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="4439485327861176">
            <conditions>
                <condition behavior="8Direction" id="0" inverted="1" name="Is moving" sid="8224787568375179" type="Kurt" />
            </conditions>
            <actions>
                <action id="4" name="Set animation" sid="8744159953368979" type="Kurt">
                    <param id="0" name="Animation">&quot;Idle&quot;</param>
                    <param id="1" name="From">1</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="8447638002056397">
            <conditions>
                <condition id="0" name="On collision with another object" sid="9181870075609327" type="EnemyProjectile">
                    <param id="0" name="Object">Kurt</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Set value" sid="892241358525268" type="Kurt">
                    <param id="0" name="Instance variable">Life</param>
                    <param id="1" name="Value">Self.Life - EnemyProjectile.damage</param>
                </action>
                <action id="-9" name="Destroy" sid="5271837925365111" type="EnemyProjectile" />
            </actions>
        </event-block>
        <comment>When Kurt enters a door, go to next room</comment>
        <event-block sid="9979674562648613">
            <conditions>
                <condition id="0" name="On collision with another object" sid="9410317469518844" type="Exit">
                    <param id="0" name="Object">Kurt</param>
                </condition>
            </conditions>
            <actions>
                <action id="-2" name="Go to layout" sid="1659347250784935" type="System">
                    <param id="0" name="Layout">Level</param>
                </action>
            </actions>
        </event-block>
        <comment>Restrict movement bounds</comment>
        <event-block sid="6127747822519078">
            <conditions>
                <condition id="-1" name="Compare X" sid="9699452458575978" type="Kurt">
                    <param id="0" name="Comparison">2</param>
                    <param id="1" name="X co-ordinate">62</param>
                </condition>
            </conditions>
            <actions>
                <action id="-1" name="Set X" sid="4407669519535328" type="Kurt">
                    <param id="0" name="X">62</param>
                </action>
                <action behavior="8Direction" id="9" name="Set vector X" sid="1670119673412655" type="Kurt">
                    <param id="0" name="Vector X">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="3065639190034906">
            <conditions>
                <condition id="-1" name="Compare X" sid="3960172350141074" type="Kurt">
                    <param id="0" name="Comparison">4</param>
                    <param id="1" name="X co-ordinate">1024-53-64</param>
                </condition>
            </conditions>
            <actions>
                <action id="-1" name="Set X" sid="377751587872577" type="Kurt">
                    <param id="0" name="X">1024-53-64</param>
                </action>
                <action behavior="8Direction" id="9" name="Set vector X" sid="7905082232097841" type="Kurt">
                    <param id="0" name="Vector X">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="412812901957058">
            <conditions>
                <condition id="-2" name="Compare Y" sid="8525259884964468" type="Kurt">
                    <param id="0" name="Comparison">2</param>
                    <param id="1" name="Y co-ordinate">250</param>
                </condition>
            </conditions>
            <actions>
                <action id="-2" name="Set Y" sid="9822818091435101" type="Kurt">
                    <param id="0" name="Y">250</param>
                </action>
                <action behavior="8Direction" id="10" name="Set vector Y" sid="6830618501325234" type="Kurt">
                    <param id="0" name="Vector Y">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="1518498866087262">
            <conditions>
                <condition id="-2" name="Compare Y" sid="689761392515438" type="Kurt">
                    <param id="0" name="Comparison">4</param>
                    <param id="1" name="Y co-ordinate">768 - 70 - 64</param>
                </condition>
            </conditions>
            <actions>
                <action id="-2" name="Set Y" sid="3115299335652547" type="Kurt">
                    <param id="0" name="Y">768 - 70 - 64</param>
                </action>
                <action behavior="8Direction" id="10" name="Set vector Y" sid="5130683613654341" type="Kurt">
                    <param id="0" name="Vector Y">0</param>
                </action>
            </actions>
        </event-block>
        <comment>Start each level by fading out</comment>
        <event-block sid="3958838691127565">
            <conditions>
                <condition id="-2" name="On start of layout" sid="5377524102918544" type="System" />
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="1177807909414602" type="System">
                    <param id="0" name="Variable">transitioning</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action id="-9" name="Set value" sid="2746994701799672" type="System">
                    <param id="0" name="Variable">transitionState</param>
                    <param id="1" name="Value">&quot;FadeIn&quot;</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="7292356579909998">
            <conditions>
                <condition id="-14" name="Compare variable" sid="1334261957462421" type="System">
                    <param id="0" name="Variable">transitioning</param>
                    <param id="1" name="Comparison">0</param>
                    <param id="2" name="Value">1</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <event-block sid="5130944589818028">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="6730340189796286" type="System">
                            <param id="0" name="Variable">transitionState</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;FadeIn&quot;</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="6977215013139725" type="System">
                            <param id="0" name="Variable">luminosity</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Value">100</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Add to" sid="9152021048816244" type="System">
                            <param id="0" name="Variable">luminosity</param>
                            <param id="1" name="Value">2</param>
                        </action>
                        <action id="-31" name="Set layout effect parameter" sid="4999564902785503" type="System">
                            <param id="0" name="Effect">&quot;Brightness&quot;</param>
                            <param id="1" name="Parameter index">0</param>
                            <param id="2" name="Value">luminosity</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2041957429163769">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="9533091000353573" type="System">
                            <param id="0" name="Variable">transitionState</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;FadeIn&quot;</param>
                        </condition>
                        <condition id="-14" name="Compare variable" sid="513202049386312" type="System">
                            <param id="0" name="Variable">luminosity</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Value">100</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="2990288977803764" type="System">
                            <param id="0" name="Variable">transitioning</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>Adjust firerate</comment>
        <variable constant="0" name="Reload" sid="2750814173308067" static="0" type="number">0</variable>
        <event-block sid="8628004244081067">
            <conditions>
                <condition id="-1" name="Every tick" sid="9041447745646265" type="System" />
            </conditions>
            <actions>
                <action id="-10" name="Add to" sid="2664420483470233" type="System">
                    <param id="0" name="Variable">Reload</param>
                    <param id="1" name="Value">dt</param>
                </action>
            </actions>
        </event-block>
        <comment>Determine player&apos;s direction</comment>
        <variable constant="0" name="lastDirection" sid="5130037124171002" static="0" type="number">0</variable>
        <event-block sid="8611634392934235">
            <conditions>
                <condition id="0" name="On key pressed" sid="6674176367915161" type="Keyboard">
                    <param id="0" name="Key">39 (Right arrow)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="4956216817994123" type="System">
                    <param id="0" name="Variable">lastDirection</param>
                    <param id="1" name="Value">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="8145022066448316">
            <conditions>
                <condition id="0" name="On key pressed" sid="1361213788117925" type="Keyboard">
                    <param id="0" name="Key">38 (Up arrow)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="1882920665314498" type="System">
                    <param id="0" name="Variable">lastDirection</param>
                    <param id="1" name="Value">3</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="4022208561938731">
            <conditions>
                <condition id="0" name="On key pressed" sid="8049763017774547" type="Keyboard">
                    <param id="0" name="Key">37 (Left arrow)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="3923695995196009" type="System">
                    <param id="0" name="Variable">lastDirection</param>
                    <param id="1" name="Value">2</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="1511832001151655">
            <conditions>
                <condition id="0" name="On key pressed" sid="8754149063330743" type="Keyboard">
                    <param id="0" name="Key">40 (Down arrow)</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Set value" sid="3999203578415115" type="System">
                    <param id="0" name="Variable">lastDirection</param>
                    <param id="1" name="Value">1</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
